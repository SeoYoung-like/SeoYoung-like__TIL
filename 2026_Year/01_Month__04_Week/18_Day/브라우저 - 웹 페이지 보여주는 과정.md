브라우저의 동작 원리를 단계별로 쉽게 설명해드리겠습니다.

## 브라우저가 웹페이지를 보여주는 과정

브라우저는 서버로부터 HTML, CSS, JavaScript 파일을 받아서 화면에 표시합니다. 이 과정을 순서대로 살펴보겠습니다.

**1. HTML 파싱 → DOM 트리 생성** 브라우저는 HTML 파일을 위에서 아래로 읽으면서 DOM(Document Object Model) 트리를 만듭니다. 이것은 웹페이지의 구조를 나타내는 tree 형태의 데이터입니다.

**2. CSS 파싱 → CSSOM 트리 생성** CSS 파일도 파싱되어 CSSOM(CSS Object Model) 트리를 만듭니다.

**3. 렌더 트리 생성 → 화면 표시** DOM과 CSSOM을 결합하여 실제로 화면에 그릴 렌더 트리를 만들고 화면에 표시합니다.

![브라우저 동작 원리](https://poiemaweb.com/img/client-server.png)



## script 태그를 만나면 무슨 일이 일어날까?

여기가 핵심입니다. HTML을 읽다가 `<script>` 태그를 만나면:

1. **HTML 파싱이 중단됩니다** (DOM 생성 작업이 멈춤)
2. JavaScript 엔진이 스크립트를 다운로드하고 실행합니다
3. JavaScript 실행이 완료되면 다시 HTML 파싱을 재개합니다

### 예시로 이해하기

```html
<!DOCTYPE html>
<html>
<head>
    <script>
        // 이 시점에서 document.body는 아직 없음!
        // body 태그를 아직 읽지 않았기 때문
        document.body.style.backgroundColor = 'red'; // 에러 발생!
    </script>
</head>
<body>
    <h1>안녕하세요</h1>
</body>
</html>
```

위 코드는 에러가 발생합니다. 왜냐하면 브라우저가 `<script>` 태그를 만났을 때 아직 `<body>` 태그를 읽지 않아서 DOM에 body 요소가 존재하지 않기 때문입니다.

## body 끝에 script를 두는 이유

```html
<!DOCTYPE html>
<html>
<head>
    <title>My Page</title>
</head>
<body>
    <h1>안녕하세요</h1>
    <p>내용입니다</p>
    
    <!-- body 끝에 스크립트 배치 -->
    <script>
        // 이제 모든 HTML 요소가 로드되었으므로 안전하게 접근 가능
        document.body.style.backgroundColor = 'lightblue'; // 정상 작동!
    </script>
</body>
</html>
```

**장점 1: 페이지 로딩이 빨라집니다**

- 사용자는 JavaScript가 로드되는 동안 기다릴 필요 없이 바로 HTML 콘텐츠를 볼 수 있습니다
- 스크립트 다운로드 때문에 화면이 하얗게 멈춰있는 현상이 없습니다

**장점 2: DOM 조작 에러가 발생하지 않습니다**

- 모든 HTML 요소가 이미 DOM에 생성된 후에 JavaScript가 실행되므로
- 어떤 요소든 안전하게 접근하고 조작할 수 있습니다

## 실제 비교

**❌ 나쁜 예 (head에 script)**

```html
<head>
    <script src="large-library.js"></script> <!-- 3초 걸림 -->
</head>
<body>
    <h1>안녕하세요</h1> <!-- 사용자는 3초 동안 빈 화면만 봄 -->
</body>
```

**✅ 좋은 예 (body 끝에 script)**

```html
<body>
    <h1>안녕하세요</h1> <!-- 즉시 보임 -->
    
    <script src="large-library.js"></script> <!-- 콘텐츠를 본 후 로드 -->
</body>
```

정리하면, 브라우저는 HTML을 위에서 아래로 순차적으로 읽기 때문에 script 태그의 위치가 중요하며, body 끝에 두면 사용자 경험과 안정성 모두를 개선할 수 있습니다.